{% block content %}
<div class="box_c"><div class="box_t">Job List:</div><div class="st_boxes">
	<table class="table"><tr><td>ID</td><td>NAME</td><td>Path</td><td>Interval</td><td>Last Run</td><td>Status</td><td>Action</td></tr>
    {% for item in jItems %}
	<tr>
		<td>{{ item.id }}</td>
		<td>{{ item.name }}</td>
		<td>{{ item.path }}</td>
		<td>{{ item.interval }}</td>
		<td>{{ item.last_run|date("m/d/Y H:i:s") }}</td>
		<td>{{ item.status_int }}</td>
		<td><a class="btn btn-default btn-xs" alt="Add to Queue for one time run" href="#" role="button" onclick="insertQ('{{ item.id }}', '{{ item.path|escape('js') }}')">Add to Queue</a> 
		<a class="btn btn-danger btn-xs" alt="Add to Queue for one time run" href="#" role="button"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a> <a class="btn btn-primary btn-xs" alt="Add to Queue for one time run" href="#" role="button"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
		</td>
	</tr>		
    {% else %}  
        <p>There are currently no jobs configured.</p>
    {% endfor %}
	</table></div></div>
	
	<script>
		function insertQ ($jobid, $path) {
			if($jobid === ""|| $path === ""){
				alert("data incorrect");
			}else{
				var hold = 1;
				$.post("api/postQueue",
					{ jobid: $jobid, path: $path, hold: hold },
					function(data, status){
						var $container = $("#queue");
						$container.load("/boxes/queue").fadeIn("slow");
				});
			}
		}
		
		function removeJob (id) {
			//alert("removing: " + id);
			if(confirm('Are you sure you want to delete this Job?')){
				$.post("api/deleteJob",
					{ id: id },
					function(data, status){
						//alert("Data: " + data + "\nStatus: " + status);
							location.reload();
					});
			}else{
				alert('Item not deleted!');
			}
		}
	
	</script>
{% endblock %}